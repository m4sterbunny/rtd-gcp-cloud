
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>GCP Networking &#8212; Cloud Notes 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Review Questions Billing &amp; Accounts" href="accounts-billing-quiz.html" />
    <link rel="prev" title="Virtual Machines" href="VMs.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="gcp-networking">
<h1>GCP Networking<a class="headerlink" href="#gcp-networking" title="Permalink to this headline">¶</a></h1>
<div class="section" id="networking-services">
<h2>Networking Services<a class="headerlink" href="#networking-services" title="Permalink to this headline">¶</a></h2>
<p>On the GCP networks are global and subnets are regional.</p>
<div class="topic">
<p class="topic-title">Networking on the GCP</p>
<p>GCP allows for pure cloud networks and linking to on-premises networks.</p>
<p>The various services include:</p>
<ul class="simple">
<li><dl class="simple">
<dt><a class="reference internal" href="#virtual-private-cloud"><span class="std std-ref">Virtual Private Cloud</span></a></dt><dd><ul>
<li><p>Google’s network (not public internet)</p></li>
<li><p>No public IP required to connect across VPC</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><a class="reference internal" href="load-balancing.html#load-balancing"><span class="std std-ref">Cloud Load Balancing</span></a></dt><dd><ul>
<li><p>distributes workload across regions</p></li>
<li><p>can load-balance HTTP, HTTPS, TCP/SSL, and UDP</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Cloud Armor</dt><dd><ul>
<li><p>protects against denial-of-service attacks (DDoS)</p></li>
<li><p>works with HTTP/S load-balancing</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Cloud Content Delivery Network (CDN)</dt><dd><ul>
<li><p>reduces latency with region-based provision</p></li>
<li><p>ideal for large volumes of static content</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Cloud Interconnect</dt><dd><ul>
<li><p>connects private networks to Google’s network</p></li>
<li><p>provides an SLA</p></li>
<li><p>alternative is VPN with reduced bandwidth</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="virtual-private-cloud">
<h2>Virtual Private Cloud<a class="headerlink" href="#virtual-private-cloud" title="Permalink to this headline">¶</a></h2>
<p>GCP’s Virtual Private Cloud (VPC) supports networking with VM instances, Kubernetes Engine containers, and the App Engine flexible environment. A VPC network is an essential component of linking with VM instances, containers, or App Engine applications. Therefore, each GCP project creates a default network a soon as any of these services are started.</p>
<p>The GCP supports 3 different VPC network types:</p>
<ul class="simple">
<li><p>Default</p></li>
<li><p>Auto mode</p></li>
<li><p>Custom mode</p></li>
</ul>
<p>The default setup has one subnet per region and pre-set firewall rules. The Auto mode option includes regional IP allocation and a fixed /20 subnet per region, it comes with one subnet per region. The custom mode does not setup default subnets, it allows full control of IP ranges as well as regional IP allocation.</p>
<p>VPC subnets have regional scope, i.e. they can span the zones that make up a region.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auto mode networks</p>
<p>Auto mode networks may be upgraded to Custom mode, but this can not be reverted.</p>
<p>They include routes, subnets, and firewall rules.</p>
<p>They are not recommended for production environments. The IP ranges are assigned for you.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ping -c <span class="m">3</span> <span class="nv">$IP</span>-Address
</pre></div>
</div>
<p>Expect positive ping results for internal IPs only if the instance exists on the same network.</p>
<p>Expect positive ping results for external IPs only if you have a firewall rule that allows ICMP incoming.</p>
</div>
<p>You can connect using internal IP addresses from different network by using options such as VPC peering.</p>
<div class="section" id="networks">
<h3>Networks<a class="headerlink" href="#networks" title="Permalink to this headline">¶</a></h3>
<p>Networks allow you to isolate systems. Different VMs, for example may exist on different networks. VMs on the same network can communicate using their internal IPs (which are actually mapped by DNS), even if they are in different regions. You can ping a VM instance by its name, for example, because VPC networks have an internal DNS service that allows you to address instances by their DNS names rather than their internal IP addresses. This is a very useful feature, because the internal IP address can change when you delete and re-create an instance.</p>
<p>Conversely, even if VMs are in the same region, if they are on different networks they must use their public/external IPs to communicate.</p>
<p>VPC networks function as a distributed firewall, with the firewall rules enforced across the entire network unless set to a specific instance only.</p>
<p>To view your firewall rules use:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute firewall-rules list --sort-by<span class="o">=</span>NETWORK
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="vpn-networking">
<h3>VPN Networking<a class="headerlink" href="#vpn-networking" title="Permalink to this headline">¶</a></h3>
<p>By leveraging VPN networks it becomes possible to connect VMs in different zones with subnets. A single firewall rule can apply to all VMs on that subnet, even though they are in different zones.</p>
<div class="section" id="subnets">
<h4>Subnets<a class="headerlink" href="#subnets" title="Permalink to this headline">¶</a></h4>
<p>Every subnet has 4 reserved IP addresses, the first 2 are assigned to the network and the subnet’s gateway. The final 2 addresses are also reserved, with the last being used as the broadcast address.</p>
<p>Overly-large subnets can cause conflicts, be cautious and do not scale a subnet beyond current usage needs.</p>
<p>To create a subnet from the cloud shell cli:</p>
<p>To create a custom network:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute networks create mynet --subnet-mode<span class="o">=</span>custom
</pre></div>
</div>
</div></blockquote>
<p>To create a custom subnet:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute networks subnets create privatesubnet-us --network<span class="o">=</span>privatenet --region<span class="o">=</span>us-central1 --range<span class="o">=</span><span class="m">172</span>.16.0.0/24
</pre></div>
</div>
</div></blockquote>
<p>To view your networks:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute networks list
</pre></div>
</div>
</div></blockquote>
<p>To create a custom network:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute networks create <span class="nv">$my</span>-net1 --subnet-mode<span class="o">=</span>custom
</pre></div>
</div>
</div></blockquote>
<p>To provide this network with firewall rules:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute firewall-rules create <span class="nv">$my</span>-firewall-custom1
--network my-net1
--allow<span class="o">=</span> tcp, udp, icmp
-- <span class="nv">source</span><span class="o">=</span>ranges <span class="nv">$IP</span>-range


gcloud compute firewall-rules create <span class="nv">$my</span>-firewall-custom2
--network my-net1
--allow<span class="o">=</span> tcp:22, tcp:3389, icmp
</pre></div>
</div>
</div></blockquote>
<p>But remember a network is just a collection of subnets. Now you have a network name to group them by, use:</p>
<p>To create a subnet:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute networks create <span class="nv">$manage</span>-subnets --region<span class="o">=</span>us-central1 --range<span class="o">=</span><span class="m">10</span>.130.0.0/20
</pre></div>
</div>
</div></blockquote>
<p>To create a 2nd subnet:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute networks create <span class="nv">$manage</span>-subnets --region<span class="o">=</span>us-central1 --range<span class="o">=</span><span class="m">10</span>.130.0.0/20
</pre></div>
</div>
</div></blockquote>
<p>To view these networks:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gcloud compute networks list
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="instance-isolation">
<h3>Instance Isolation<a class="headerlink" href="#instance-isolation" title="Permalink to this headline">¶</a></h3>
<p>A bastion host acts to isolate an instance for you.</p>
<img alt="../_images/bastion-host.PNG" src="../_images/bastion-host.PNG" />
</div>
<div class="section" id="hybrid-infrastructure">
<h3>Hybrid Infrastructure<a class="headerlink" href="#hybrid-infrastructure" title="Permalink to this headline">¶</a></h3>
<p>Enterprise applications can get big fast. A lift and shift into the cloud is no small task, and so most organizations take a hybrid approach – perhaps by taking a microservice approach and starting with cloud microservices.</p>
<p>GCP has a service called Anthos to assist with such transitions.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Cloud Notes</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api.html">A World of API</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounts-billing.html">Accounts &amp; Billing</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud-shell.html">Cloud Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="load-balancing.html">Load-balancing</a></li>
<li class="toctree-l1"><a class="reference internal" href="stackdriver.html">Stackdriver</a></li>
<li class="toctree-l1"><a class="reference internal" href="VMs.html">Virtual Machines</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">GCP Networking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#networking-services">Networking Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-private-cloud">Virtual Private Cloud</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="accounts-billing-quiz.html">Review Questions Billing &amp; Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounts-billing-quiz.html#answers-billing-accounts">Answers Billing &amp; Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="storage.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="ace-exam.html">ACE</a></li>
<li class="toctree-l1"><a class="reference internal" href="react-app.html">Set Up a Ubuntu Environment on GCP</a></li>
<li class="toctree-l1"><a class="reference internal" href="react-app.html#upload-your-lottie-to-your-vm">3.0 Upload your Lottie to your VM</a></li>
<li class="toctree-l1"><a class="reference internal" href="react-app.html#customize-your-app-with-a-lottie">Customize Your App with a Lottie</a></li>
<li class="toctree-l1"><a class="reference internal" href="database-services.html">GCP Data Services</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="VMs.html" title="previous chapter">Virtual Machines</a></li>
      <li>Next: <a href="accounts-billing-quiz.html" title="next chapter">Review Questions Billing &amp; Accounts</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, masterbunny.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/pages/virtual-networking.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>